### Configuration file for the soupault website generator ###

## Global settings

[settings]
  # Show build progress
  verbose = true

  # Show detailed debug information
  debug = false

  # Fail on page processing errors
  strict = true

  # Where generated files go
  build_dir = "build/"

  # Where page files are stored
  site_dir = "site/"

  # Where in the template the page content is inserted
  default_content_selector = "main"

  default_template_file = "templates/main.html"

  # Page considered the section index
  index_page = "index"

  page_file_extensions = ["html", "md"]

  doctype = "<!DOCTYPE html>"

  # Automatically load Lua plugins from plugins/
  # E.g. plugins/reading-time.lua is automatically loaded as "reading-time" widget.
  plugin_discovery = true
  plugin_dirs = ["plugins"]


[preprocessors]
  md = 'pandoc -f commonmark+smart -t html'

## Autogenerated section index settings
[index]
  index = true

  section = "blog/"

  sort_descending = true

  sort_by = "title"
  sort_type = "lexicographic"

  leaf_file = ".leaf"

[index.fields]
  title = { selector = ["page-title", "h1#page-title"] }
  categories = { selector = ["category", "span.category"], select_all = true }

# Takes the content of the first #page-title element or <h1> and inserts it into the <title>
# default is used if page has no elements matching those selectors.
[widgets.set-page-title]
  widget = "title"

  selector = ["page-title", "h1#page-title"]
  default = "My Wiki"
  append = " &mdash; My Wiki"

# Inserts a table of contents generated from page headings
[widgets.table-of-contents]
  #exclude_path_regex = '/index(.*)'

  widget = "toc"
  selector = "#generated-toc"

  min_level = 2

  toc_list_class = "toc"
  toc_class_levels = false

  valid_html = true

  numbered_list = true

  heading_links = true
  heading_link_text = "â†’ "
  heading_link_class = "here"

  use_heading_slug = true

[widgets.insert-footnotes-container]
  widget = "insert-if"

  selector = "main"
  check_selector = "fn"
  html = '<div id="footnotes"> </div>'

[widgets.footnotes]
  widget = "footnotes"

  after = "insert-footnotes-container"

  selector = "div#footnotes"
  footnote_selector = ["fn"]
  footnote_link_class = "footnote"
  back_links = true
  link_id_prepend = "footnote-"
  back_link_id_append = "-ref"

